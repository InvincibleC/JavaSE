# 类的设计

类与类之间的关系

- 关联关系(has-a)
- 依赖关系(use-a)
- 继承关系(is_a)



# 关联关系

关联关系

– 对象和对象之间的连接。

在Java中，关联关系的代码表现形式为一个类做为另一个类的属性类型存在。

– 即“有”的关系：”has-a”。



案例:

学生和班级

![file://C:\Users\ADMINI~1\AppData\Local\Temp\ct_tmp/1.png](assets/clip_image001-1547718800131.png)

![file://C:\Users\ADMINI~1\AppData\Local\Temp\ct_tmp/2.png](assets/clip_image001-1547718806354.png)



 一对一关联：一个学生，只能在一个班级里学习。

 一对多关联：一个学生，可以参加多个班级学习。

l解决一对多的关联的方案

－ 集合 

－ 数组





一对多的案例

- 一只猫有9条命
- 订单和货物
	1. 一条订单信息与货物之间的关系。
	2. 一个订单会有几个货物。
	3. 货物是订单的属性还是方法的参数





单向关联： A类关联B类。 

双向关联：A类关联B类,B类关联A类;

双向关联案例:

![file://C:\Users\ADMINI~1\AppData\Local\Temp\ct_tmp/3.png](assets/clip_image001-1547719144807.png)

![file://C:\Users\ADMINI~1\AppData\Local\Temp\ct_tmp/4.png](assets/clip_image001-1547719149751.png)

双向关联练习:

教师类和学生类



## 关联关系的特殊情况

如果两个互相关联的类中有整体和部分的关系，关联关系分为：
聚合和组合，主要区别在于生命周期不同。



```java
public class Team {
    private Player player;//运动员
}

class Player {
}
//聚合
//球员与球队之间耦合度较低 可先设立球队,再招募球员,球员全部离职后,球队还在
```







```java
public class Team {
    private Player player = new Player();//运动员
}

class Player {
}
//组合
//球员与球队之间耦合度较高  球队中必须要有一个球员 没有球员时,就不再有球队

```

## 练习

分析淘宝用户与订单。

分析用户与订单之间的关系。

一个用户可以有几个订单，如何在用户信息存储订单信息。









# 依赖

依赖关系(use-a)

指一个类A使用到了另一个类B

依赖关系的特性

这种关系是具有偶然性的、临时性的、非常弱的，但是类B的变化会影响到类A。

依赖具体表现

在代码层面，依赖关系表现为类B作为参数被类A在某个method方法中使用

```Java
public class Person {
    public void travel(Bus bus) {
    }
}

class Bus {
}
```



setter方法一般也要依赖其他的类

![file://C:\Users\ADMINI~1\AppData\Local\Temp\ct_tmp/2.png](assets/clip_image001-1547720254397.png)



## 依赖与关联的区别

 

关联是“HAS”关系，依赖是“USE”关系

A类关联B类，指的是B类对象作为A类的属性存在，称为“has”关系。

A类依赖B类，指的是B的对象作为A类的方法参数存在，称为“use”关系。

 

生命周期不同

如果A类关联B类，那么创建A类的对象时实例化B类的对象，直到A类对象被销毁，所关联的B类对象也被销毁。即只要A类对象存在，B类对象就存在。

如果A类依赖B类，那么只有当A类对象调用到相应方法时，B类对象才被临时创建，方法执行结束，B类对象即被标识为可回收，A类和B类之间的依赖关系是一种瞬时的关系。

## 练习

1.人养宠物

解析：
	1>.分析有几个类；
	2>.类与类之间的关系；	
	3>对于人来说养宠物是人的属性还是方法。	
	4>.对于人来判断，动物是人的属性，还是方法的参数。 





2.人和宠物(使用关联的关系) 

 

3.人上班或者出行需要交通工具。

分析人与交通工具的关系。

 

 

4.创建Cart类，Product类，模拟添加到购物车、查看购物车功能。

5.

需求：使用java描述一个汽车类，汽车具备轮子数、名字、颜色三个属性，还具备跑的功能行为。

需求：使用java描述车与修车厂两个事物，车具备的公共属性：轮子数、名字、颜色，还具备跑的功能行为。跑之前要检测轮子是否少于了4个，如果少于4个，那么要送到修车厂修理，

修车厂修理之后，车的轮子数要补回来4个。然后车就继续的跑起来。

修车厂：具备公共属性 名字、地址、电话。

公共的行为：修车。

